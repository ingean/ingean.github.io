<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=7,IE=9" />
    <title>Bilder</title>
    <style>
		html, body { height: 100%; width: 100%; margin: 0; padding: 0; }
		#left {
			position: absolute;
			left: 5px;
			top: 5px;
		}
		#right {
			position: absolute;
			right: 5px;
			top: 5px;
		}
		#image {
		}
    </style>
    <script type="text/javascript">

        var prefix, suffix, current, interval;
		function onLoad() {
		
			//0033_2320_km385,995.jpg
			
			var source = gup("src");
			prefix = gup("pre");
			suffix = gup("suf");
			interval = gup("int") * 1;
			
            current = source.replace(prefix, "").replace(suffix, "");
			current = current.replace(",", ".");
			current = current * 1;
	
			showCurrent();
		}
		
		function previous() {
			current -= interval;
			current = Math.round(current * 1000) / 1000;
			showCurrent();
		}
		
		function next() {
			current = current + interval;
			current = Math.round(current * 1000) / 1000;
			showCurrent();
		}
		
		function showCurrent() {
			var c = (current + "").replace(".", ",");
			var source = prefix + c + suffix;
			//document["image"].src = source;
			document.getElementById("image").src = source;
			console.debug(source);
		}
		
		function gup( name ) {
			name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
			var regexS = "[\\?&]"+name+"=([^&#]*)";
			var regex = new RegExp( regexS );
			var results = regex.exec( window.location.href );
			if( results == null )
				return "";
			else
				return results[1];
		}
    </script>
  </head>
  <body onload="javascript:onLoad();">
	<button type="button" id="left" onclick="javascript:previous();">Forrige</button>
	<button type="button" id="right" onclick="javascript:next();">Neste</button>
	<img id="image" alt="bilde" />
  </body>
</html>
